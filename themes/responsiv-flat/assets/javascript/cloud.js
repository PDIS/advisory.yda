/* Modified: July 6, 2016, 11:08:23 */
!function(){function a(a){if(a.region===f){d.textContent=a.region;var b=k.nodes(c(a)).filter(function(a){return!a.children}),e=j.selectAll("circle").data(b,function(a){return a.name}),g=500,h=0;e.transition().duration(g).delay(function(a,b){return h=7*b}).attr("transform",function(a){return"translate("+a.x+","+a.y+")"}).attr("r",function(a){return a.r}).style("opacity",1),e.enter().append("circle").attr("transform",function(a){return"translate("+a.x+","+a.y+")"}).attr("r",function(){return 0}).attr("class",function(a){return a.className}).transition().duration(1.2*g).attr("transform",function(a){return"translate("+a.x+","+a.y+")"}).attr("r",function(a){return a.r}).style("opacity",1),e.exit().transition().duration(g).attr("transform",function(a){var b=a.y-i/2,c=a.x-i/2,d=Math.atan2(b,c),e=i*(1+Math.cos(d))/2,f=i*(1+Math.sin(d))/2;return"translate("+e+","+f+")"}).attr("r",function(){return 0}).remove()}}function b(){m.subscribe({channel:l,callback:function(b){a(b)}})}function c(a){if(a){var b=a.countries_msg_vol,c=[];for(var d in b)c.push({name:d,className:d.toLowerCase().replace(/ /g,""),size:b[d]});return{children:c}}}var d=document.getElementById("region"),e=document.getElementById("dataCenterPicker"),f=e.options[e.selectedIndex].value;e.addEventListener("change",function(){f=e.options[e.selectedIndex].value,console.log(f)},!1);var g=!0,h=document.getElementById("toggle");h.addEventListener("click",function(){g?(m.unsubscribe({channel:l}),h.value="Stream again",g=!1):(b(),h.value="Stop me!",g=!0)},!1);var i=Math.min(document.getElementById("chart").clientWidth,window.innerHeight-document.querySelector("header").clientHeight)-20,j=d3.select("#chart").append("svg").attr("width",i).attr("height",i),k=d3.layout.pack().size([i,i]).value(function(a){return a.size}).padding(3),l="rts-xNjiKP4Bg4jgElhhn9v9",m=PUBNUB.init({subscribe_key:"e19f2bb0-623a-11df-98a1-fbd39d75aa3f",ssl:"https:"==document.location.protocol?!0:!1});b()}();